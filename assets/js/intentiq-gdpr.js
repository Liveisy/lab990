/** 20250210 */

function _typeof(t){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t){var e="idproviders",r="INTENT_IQ",i="https://cdn.taboola.com/scripts/IIQAgent/IIQAgent-",n=359446293,o=1411546426,s=.01,a="id",g="gdpr",l="daisybit",c="v";try{t.TRC.intentIq={init:function e(){if(this.sampleLogs=Math.random()<s,this.log("init"),this.queryParams=this.parseQueryParams()||this.getDummyQueryParams(),t&&t.TRC||this.logError("missing-trc"),t.TRC.intentIqInitialized)this.logError("already-init");else{try{t&&t.localStorage&&t.localStorage.getItem&&"function"==typeof t.localStorage.getItem?this.loadIntentIq():this.logError("no-storage")}catch(t){this.logError("storage")}t.TRC.intentIqInitialized=!0}},validateQueryParams:function e(){return"currentScript"in t.document&&"src"in t.document.currentScript&&"URL"in t&&"parse"in t.URL},parseQueryParams:function e(){if(this.validateQueryParams()){var r=t.URL.parse(t.document.currentScript.src);return r.searchParams&&this.log("queryParams","parsed"),r.searchParams}},getDummyQueryParams:function t(){return this.log("queryParams","dummy"),{get:function t(){return null}}},loadIntentIq:function t(){this.log("loading");try{this.loadScript(this.getIntentIqSource(),this.onScriptLoaded.bind(this),this.logError.bind(this,"script"))}catch(t){this.logError("load")}},getIntentIqSource:function e(){if(t.TRC&&t.TRC.iiqAgentOverride)return t.TRC.iiqAgentOverride;var r=this.queryParams.get(c)||"latest";return"".concat(i).concat(r,".js")},onScriptLoaded:function e(){if(t.IntentIqObject){this.log("loaded");var r=this.logDefined("tuid",this.getUserId()),i=this.logDefined("meta",this.getMetaData());this.logMetaData(i),this.log("request"),this.timingStart=+new Date;var s={refreshInMillis:432e5,timeoutInMillis:3e3,isAsyncServerRequest:!0,callback:this.onData.bind(this),enhanceRequests:!1,sourceMetaData:i,mode:"Both",partnerClientId:r,partnerClientIdType:0,domainName:this.getDomain(),vrBrowserBlackList:["chrome"]};this.isGdprApplies()?(this.log("gdprApplies","true"),s.partner=o,s.providedGDPR=this.getDaisybit()):(this.log("gdprApplies","false"),s.partner=n),this.iiq=new t.IntentIqObject(s)}else this.logError("missing-obj")},onData:function t(e){this.log("timing",+new Date-this.timingStart),"object"===_typeof(e)&&e?(this.log("response"),this.log("size",Object.keys(e).length),this.storeProviderIds(r,e)):this.logError("response")},storeProviderIds:function r(i,n){this.log("storing");var o=this.getExistingProviderIds();o[i]=n;try{this.log("setting"),t.localStorage.setItem(e,t.JSON.stringify(o)),this.log("set")}catch(t){this.logError("set")}},logMetaData:function t(e){e&&("string"!=typeof e?this.logError("bad-meta"):"0.0.0.0"===e&&this.logError("masked-meta"))},getExistingProviderIds:function r(){try{var i=t.localStorage.getItem(e)||"{}";return t.JSON.parse(i)}catch(t){return this.logError("existing"),{}}},loadScript:function e(r,i,n){var o=t.document.createElement("script");o.src=r,o.onload=i,o.onerror=n,t.document.head.appendChild(o)},getUserId:function t(){return this.getParamUserId()||this.getTrcUserId()||this.getTfaUserId()},getParamUserId:function t(){return this.queryParams.get(a)},getTfaUserId:function e(){return t.TFASC&&t.TFASC.tfaUserId&&"function"==typeof t.TFASC.tfaUserId.getUserId?t.TFASC.tfaUserId.getUserId():null},getTrcUserId:function e(){return t.TRC.pageManager&&"function"==typeof t.TRC.pageManager.getUserId?t.TRC.pageManager.getUserId():null},getMetaData:function e(){return t.TRC.unmaskedIpParser&&t.TRC.unmaskedIpParser.get()||void 0},getDomain:function e(){if(t.TRCImpl&&t.TRCImpl.getItemUrl&&"function"==typeof t.TRCImpl.getItemUrl)try{return new URL(t.TRCImpl.getItemUrl()).host}catch(t){this.logError("item-URL-error")}else this.logError("item-URL-missing");return t.location.hostname},isGdprApplies:function t(){var e;return"1"===(this.queryParams.get(g)||"0")},getDaisybit:function t(){return this.queryParams.get(l)||""},logError:function t(e){this.log("error",e)},logDefined:function t(e,r){return this.log(e,!!r),r},log:function t(e,r){this.sampleLogs&&(r&&(r={extraData:{value:r}}),TRC.RBoxUsage.logUsage("iiq.".concat(e),r))}},t.TRC.intentIq.init()}catch(t){__trcError("Error running Intent IQ",t)}}(window);